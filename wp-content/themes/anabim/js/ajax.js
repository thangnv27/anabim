function displayBarNotification(a,b,c){var d=jQuery("#nNote");a?(d.attr("class","").addClass("nNote "+b).fadeIn().html(c),setTimeout(function(){d.attr("class","").hide("slow").html("")},1e4)):d.attr("class","").hide("slow").html("")}function displayAjaxLoading(a){a?jQuery(".ajax-loading-block-window").show():jQuery(".ajax-loading-block-window").hide("slow")}function ShowPoupEditOrder(){displayAjaxLoading(!0),jQuery.get(ajaxurl,{action:"loadCartEditOrder"},function(a){jQuery.colorbox({html:a,overlayClose:!1,onClosed:function(){reload&&window.location.reload()}}),displayAjaxLoading(!1)})}function ShowPoupOrderDetail(a){displayAjaxLoading(!0),jQuery.colorbox({width:840,html:a,fixed:!0}),displayAjaxLoading(!1)}function ShowPoupCartDetail(a){displayAjaxLoading(!0),jQuery.colorbox({width:840,href:a,fixed:!0}),displayAjaxLoading(!1)}var reload=!1,paged=2,loading=!1,AjaxCart={membershipAddToCart:function(a,b){var c=!0;is_user_logged_in||(c=!1,setLocation(loginUrl)),c&&(displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"membershipAddToCart",id:a,time:b,locale:lang},success:function(a){a&&"success"===a.status?setLocation(membershipCheckoutUrl):"error"===a.status&&displayBarNotification(!0,"nWarning",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}}))},membershipOrderComplete:function(a){displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:a,success:function(a){a&&"success"==a.status?(displayBarNotification(!0,"nSuccess",a.message),setTimeout(function(){setLocation(siteUrl)},1e4)):"error"==a.status?(displayBarNotification(!0,"nWarning",a.message),a.login&&1==a.login&&setLocation(loginUrl)):"failure"==a.status&&displayBarNotification(!0,"nFailure",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}})},membershipOrderNganLuong:function(a){return displayAjaxLoading(!0),$.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:a,success:function(a){a&&"success"==a.status?(displayBarNotification(!0,"nSuccess",a.message),setTimeout(function(){setLocation(a.nganluongUrl)},1500)):"error"==a.status?(displayBarNotification(!0,"nWarning",a.message),a.login&&1==a.login&&setLocation(loginUrl)):"failure"==a.status&&displayBarNotification(!0,"nFailure",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}}),!1},addToCart:function(a,b,c){var d=!0;is_user_logged_in||(d=!1,alert("B\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c chuy\u1ec3n \u0111\u1ebfn trang \u0111\u0103ng nh\u1eadp tr\u01b0\u1edbc khi \u0111\u0103ng k\xfd kho\xe1 h\u1ecdc n\xe0y!"),setLocation(loginUrl)),d&&(displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"addToCart",id:a,title:b,price:c,locale:lang},success:function(a){a&&"success"===a.status?setLocation(cartUrl):"error"===a.status&&displayBarNotification(!0,"nWarning",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}}))},deleteItem:function(a){displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"deleteCartItem",id:a,locale:lang},success:function(b){b&&"success"==b.status?(jQuery(".cart-price span.total_price").html(b.totalAmount),jQuery("#product_item_"+a).remove(),displayBarNotification(!0,"nSuccess",b.message),reload=!0):"error"==b.status&&displayBarNotification(!0,"nWarning",b.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}})},updateItem:function(a,b){displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"updateCartItem",id:a,time:b,locale:lang},success:function(b){b&&"success"===b.status?(jQuery("#product_item_"+a+" .product-subtotal").html(b.item_amount),jQuery(".cart-price span.total_price").html(b.totalAmount),displayBarNotification(!0,"nSuccess",b.message),reload=!0):"error"===b.status&&displayBarNotification(!0,"nWarning",b.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}})},preCheckout:function(){displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"preCheckout",locale:lang},success:function(a){a&&"success"==a.status?setLocation(checkoutUrl):"error"==a.status&&displayBarNotification(!0,"nWarning",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}})},orderComplete:function(a){displayAjaxLoading(!0),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:a,success:function(a){a&&"success"==a.status?(displayBarNotification(!0,"nSuccess",a.message),setTimeout(function(){setLocation(siteUrl+"/shop")},1e4)):"error"==a.status?(displayBarNotification(!0,"nWarning",a.message),a.login&&1==a.login&&setLocation(loginUrl)):"failure"==a.status&&displayBarNotification(!0,"nFailure",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}})},orderNganLuong:function(a){return displayAjaxLoading(!0),$.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:a,success:function(a){a&&"success"==a.status?(displayBarNotification(!0,"nSuccess",a.message),setTimeout(function(){setLocation(a.nganluongUrl)},1500)):"error"==a.status?(displayBarNotification(!0,"nWarning",a.message),a.login&&1==a.login&&setLocation(loginUrl)):"failure"==a.status&&displayBarNotification(!0,"nFailure",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}}),!1},usingCoupon:function(a,b){displayAjaxLoading(!0),$.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"usingCoupon",coupon_code:a,total_amount:b,locale:lang},success:function(a){a&&"success"==a.status?($(".cart-price .total_price").html(a.totalAmount),$(".discount-amount").show().html(a.couponAmount)):"error"==a.status&&displayBarNotification(!0,"nFailure",a.message)},error:function(){},complete:function(){displayAjaxLoading(!1)}})}};jQuery(document).ready(function(a){a("#nNote").click(function(){a(this).attr("class","").hide("slow").html("")}),a("#coupon_code").change(function(){var b=a(this).val().trim();b.length>0&&AjaxCart.usingCoupon(b,a("#total_amount").val().trim())})});